package reversiassignment;

import java.util.Iterator;
import java.util.Set;

import reversiassignment.Board.Cellstate;

public class Game {
	private Board board;
	private Helper helper;
	private int scoreW, scoreB;
	private PlayerAI player1, player2;

	public Game() {
		board = new Board();
		helper = new Helper();
		player1 = new PlayerAI(Cellstate.BLACK, helper, board, 2);
		player2 = new PlayerAI(Cellstate.WHITE, helper, board, 2);
	}

	public void play() {
		System.out.print(board.toString()); //Print board
		PlayerAI currentPlayer = player1;
		PlayerAI otherPlayer = player2;
		PlayerAI tmp;
		while (!board.gameOver()) {
			int flips = currentPlayer.playerMove(); //Player makes move
			currentPlayer.modifyScore(flips+1);
			otherPlayer.modifyScore(-flips);
			System.out.print(board.toString()); //Print new board
			System.out.println("Score: B-" + scoreB + " W-" + scoreW);
			//Next player
			tmp = currentPlayer;
			currentPlayer = otherPlayer;
			otherPlayer = tmp;
		}
	}
	
	private void calcScore(int nbrOfFlips, Cellstate player) {
		if (player == Cellstate.BLACK) { 
			scoreB += 1 + nbrOfFlips;
			scoreW -= nbrOfFlips;
		} else {
			scoreW += 1 + nbrOfFlips;
			scoreB -= nbrOfFlips;
		}
	}

	public static void main(String[] args) throws InterruptedException {
		new Game().play();
	}
}