package reversiassignment;

import java.util.Set;

import reversiassignment.Board.Cellstate;

public class PlayerAI implements Player{
	private Cellstate color;
	private Board board;
	private Helper helper;
	private boolean maximizing;
	
	public PlayerAI(Cellstate c, Board b, Helper h, boolean max) {
		this.color = c;
		board = b;
		helper = h;
		maximizing = max;
	}
	
	public void playerMove() {
		Board newBoard = new Board(board.getBoard(), board.getAdjs());
		GameState root = new GameState(newBoard, null, color);
		MiniMax mm = new MiniMax(helper, color);
		Position p;
		if (maximizing)
			p = mm.maxDecision(root);
		else
			p = mm.minDecision(root);
		System.out.println(p.toString());
		Set<Position> flips = helper.evaluateMove(p, color, board);
		// Placing and flipping
		if (!flips.isEmpty()) {
			System.out.println("Player " + color + " placed marker at " + p.toString());
			board.placeMarker(p, color);
			board.flipMarkers(flips, color);
		}
	}
	
	
	public Cellstate getColor() {
		return color;
	}

}
